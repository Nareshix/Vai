<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ScrollSpy with Accordion</title>
  <style>
    :root {
      --vp-c-white: #ffffff;
      --vp-c-black: #000000;
      --vp-c-neutral: var(--vp-c-black);
      --vp-c-neutral-inverse: var(--vp-c-white);
      --vp-c-gray-1: #dddde3;
      --vp-c-gray-2: #e4e4e9;
      --vp-c-gray-3: #ebebef;
      --vp-c-gray-soft: rgba(142, 150, 170, 0.14);
      --vp-c-indigo-1: #3451b2;
      --vp-c-indigo-2: #3a5ccc;
      --vp-c-indigo-3: #5672cd;
      --vp-c-indigo-soft: rgba(100, 108, 255, 0.14);
      --vp-c-bg: #ffffff;
      --vp-c-bg-alt: #f6f6f7;
      --vp-c-bg-elv: #ffffff;
      --vp-c-bg-soft: #f6f6f7;
      --vp-c-border: #c2c2c4;
      --vp-c-divider: #e2e2e3;
      --vp-c-gutter: #e2e2e3;
      --vp-c-text-1: #3c3c43;
      --vp-c-text-2: #67676c;
      --vp-c-text-3: #929295;
      --vp-c-brand-1: var(--vp-c-indigo-1);
      --vp-c-brand-2: var(--vp-c-indigo-2);
      --vp-c-brand-3: var(--vp-c-indigo-3);
      --vp-c-brand-soft: var(--vp-c-indigo-soft);
      --vp-font-family-base: 'Inter', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
      --vp-nav-height: 64px;
      --vp-shadow-1: 0 1px 2px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.06);
      --vp-sidebar-width: 200px;
    }

    .dark {
      --vp-c-neutral: var(--vp-c-white);
      --vp-c-neutral-inverse: var(--vp-c-black);
      --vp-c-gray-1: #515c67;
      --vp-c-gray-2: #414853;
      --vp-c-gray-3: #32363f;
      --vp-c-gray-soft: rgba(101, 117, 133, 0.16);
      --vp-c-indigo-1: #a8b1ff;
      --vp-c-indigo-2: #5c73e7;
      --vp-c-indigo-3: #3e63dd;
      --vp-c-indigo-soft: rgba(100, 108, 255, 0.16);
      --vp-c-bg: #1b1b1f;
      --vp-c-bg-alt: #161618;
      --vp-c-bg-elv: #202127;
      --vp-c-bg-soft: #202127;
      --vp-c-border: #3c3f44;
      --vp-c-divider: #2e2e32;
      --vp-c-gutter: #000000;
      --vp-c-text-1: #dfdfd6;
      --vp-c-text-2: #98989f;
      --vp-c-text-3: #6a6a71;
    }

    body {
      margin: 0;
      font-family: var(--vp-font-family-base);
      background-color: var(--vp-c-bg);
      color: var(--vp-c-text-1);
      transition: background-color 0.3s, color 0.3s;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--vp-nav-height);
      background-color: var(--vp-c-bg-alt);
      box-shadow: var(--vp-shadow-1);
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding: 0 20px;
      z-index: 30;
      transition: background-color 0.3s;
    }

    .left-sidebar {
      position: fixed;
      top: var(--vp-nav-height);
      left: 0;
      width: var(--vp-sidebar-width);
      height: calc(100vh - var(--vp-nav-height));
      background-color: var(--vp-c-bg-alt);
      padding: 20px;
      overflow-y: auto;
      box-shadow: var(--vp-shadow-1);
      z-index: 25;
      transition: background-color 0.3s;
    }

    .accordion {
      border-bottom: 1px solid var(--vp-c-divider);
    }

    .accordion-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 0;
      cursor: pointer;
      color: var(--vp-c-text-1);
      font-size: 16px;
      transition: color 0.3s;
    }

    .accordion-header:hover {
      color: var(--vp-c-brand-2);
    }

    .accordion-header svg {
      width: 16px;
      height: 16px;
      fill: var(--vp-c-text-2);
      transition: transform 0.3s, fill 0.3s;
    }

    .accordion-header:hover svg {
      fill: var(--vp-c-brand-2);
    }

    .accordion-header.active svg {
      transform: rotate(90deg);
    }

    .accordion-content {
      padding: 10px 0;
      display: block;
    }

    .accordion-content a {
      display: block;
      color: var(--vp-c-text-2);
      text-decoration: none;
      padding: 5px 0;
      font-size: 14px;
      transition: color 0.3s;
    }

    .accordion-content a:hover {
      color: var(--vp-c-brand-2);
    }

    nav {
      position: fixed;
      top: 0;
      right: 0;
      width: var(--vp-sidebar-width);
      height: 100vh;
      background-color: var(--vp-c-bg);
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      box-shadow: var(--vp-shadow-1);
      z-index: 25;
      transition: background-color 0.3s;
      overflow-y: auto;
    }

    nav a {
      color: var(--vp-c-text-2);
      text-decoration: none;
      font-size: 16px;
      transition: color 0.3s;
    }

    nav a:hover {
      color: var(--vp-c-brand-2);
    }

    nav a.active {
      color: var(--vp-c-brand-1);
      font-weight: 600;
    }

    nav a.subsection {
      padding-left: 15px;
      font-size: 14px;
    }

    .theme-toggle {
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px;
      display: flex;
      align-items: center;
    }

    .theme-toggle svg {
      width: 24px;
      height: 24px;
      fill: var(--vp-c-text-2);
      transition: fill 0.3s;
    }

    .theme-toggle:hover svg {
      fill: var(--vp-c-brand-2);
    }

    main {
      margin-top: var(--vp-nav-height);
      max-width: 800px;
      margin-left: calc(var(--vp-sidebar-width) + 48px);
      margin-right: calc(var(--vp-sidebar-width) + 20px);
      padding: 20px;
    }

    section {
      min-height: 100vh;
      padding: 40px 0;
    }

    section h1 {
      color: var(--vp-c-text-1);
      margin-bottom: 20px;
      font-size: 2em;
    }

    section h2 {
      color: var(--vp-c-text-1);
      margin-bottom: 15px;
      font-size: 1.5em;
    }

    section h3 {
      color: var(--vp-c-text-1);
      margin-bottom: 10px;
      font-size: 1.2em;
    }

    section p {
      color: var(--vp-c-text-2);
      line-height: 1.6;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>
  <header>
    <button class="theme-toggle" aria-label="Toggle theme">
      <svg class="sun-icon" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="5"/>
        <path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M17.64 6.36l1.42-1.42"/>
      </svg>
      <svg class="moon-icon" viewBox="0 0 24 24" style="display: none;">
        <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
      </svg>
    </button>
  </header>
  <aside class="left-sidebar">
    <div class="accordion">
      <div class="accordion-header active">
        <span>Resources</span>
        <svg viewBox="0 0 24 24">
          <path d="M9 5l7 7-7 7"/>
        </svg>
      </div>
      <div class="accordion-content">
        <a href="https://example.com/docs">Documentation</a>
        <a href="https://example.com/blog">Blog</a>
        <a href="https://example.com/community">Community</a>
      </div>
    </div>
    <div class="accordion">
      <div class="accordion-header active">
        <span>Support</span>
        <svg viewBox="0 0 24 24">
          <path d="M9 5l7 7-7 7"/>
        </svg>
      </div>
      <div class="accordion-content">
        <a href="https://example.com/faq">FAQ</a>
        <a href="https://example.com/contact">Contact Us</a>
      </div>
    </div>
  </aside>
  <nav>
    <a href="#home">Home</a>
    <a href="#home-intro" class="subsection">Introduction</a>
    <a href="#home-details" class="subsection">Details</a>
    <a href="#home-vision" class="subsection">Vision</a>
    <a href="#about">About</a>
    <a href="#about-team" class="subsection">Our Team</a>
    <a href="#about-mission" class="subsection">Our Mission</a>
    <a href="#about-values" class="subsection">Our Values</a>
    <a href="#services">Services</a>
    <a href="#services-offerings" class="subsection">Offerings</a>
    <a href="#services-benefits" class="subsection">Benefits</a>
    <a href="#services-process" class="subsection">Process</a>
    <a href="#contact">Contact</a>
    <a href="#contact-info" class="subsection">Contact Info</a>
    <a href="#contact-form" class="subsection">Contact Form</a>
    <a href="#contact-support" class="subsection">Support</a>
  </nav>
  <main>
    <section id="home">
      <h1 id="home-intro">Introduction</h1>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
      <h2 id="home-details">Details</h2>
      <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      <h3 id="home-vision">Vision</h3>
      <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
    </section>
    <section id="about">
      <h1 id="about-team">Our Team</h1>
      <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      <h2 id="about-mission">Our Mission</h2>
      <p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
      <h3 id="about-values">Our Values</h3>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    </section>
    <section id="services">
      <h1 id="services-offerings">Offerings</h1>
      <p>Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
      <h2 id="services-benefits">Benefits</h2>
      <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
      <h3 id="services-process">Process</h3>
      <p>Excepteur sint occaecat cupidatat non proident.</p>
    </section>
    <section id="contact">
      <h1 id="contact-info">Contact Info</h1>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
      <h2 id="contact-form">Contact Form</h2>
      <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      <h3 id="contact-support">Support</h3>
      <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum.</p>
    </section>
  </main>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const navLinks = document.querySelectorAll('nav a');
      const sections = document.querySelectorAll('section, h1, h2, h3');
      const themeToggle = document.querySelector('.theme-toggle');
      const sunIcon = document.querySelector('.sun-icon');
      const moonIcon = document.querySelector('.moon-icon');
      const accordionHeaders = document.querySelectorAll('.accordion-header');

      // ScrollSpy functionality
      const observerOptions = {
        root: null,
        rootMargin: '-100px 0px 0px 0px',
        threshold: 0.3
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            navLinks.forEach(link => {
              link.classList.remove('active');
              if (link.getAttribute('href').substring(1) === entry.target.id) {
                link.classList.add('active');
              }
            });
          }
        });
      }, observerOptions);

      sections.forEach(section => observer.observe(section));

      // Theme toggle functionality
      const savedTheme = localStorage.getItem('theme') || 'light';
      if (savedTheme === 'dark') {
        document.body.classList.add('dark');
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
      } else {
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      }

      themeToggle.addEventListener('click', () => {
        document.body.classList.toggle('dark');
        const isDark = document.body.classList.contains('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        sunIcon.style.display = isDark ? 'block' : 'none';
        moonIcon.style.display = isDark ? 'none' : 'block';
      });

      // Accordion functionality
      accordionHeaders.forEach(header => {
        header.addEventListener('click', () => {
          const isActive = header.classList.contains('active');
          header.classList.toggle('active');
          const content = header.nextElementSibling;
          content.style.display = isActive ? 'none' : 'block';
        });
      });
    });
  </script>
</body>
</html>